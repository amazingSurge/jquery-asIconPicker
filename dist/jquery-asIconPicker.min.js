/**
* jQuery asIconPicker v0.2.1
* https://github.com/amazingSurge/jquery-asIconPicker
*
* Copyright (c) amazingSurge
* Released under the LGPL-3.0 license
*/
!function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("undefined"!=typeof exports)t(require("jquery"));else{var i={exports:{}};t(e.jQuery),e.jqueryAsIconPickerEs=i.exports}}(this,function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=t(e),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),r={namespace:"asIconPicker",source:!1,tooltip:!0,hasSearch:!0,extraClass:"fa",iconPrefix:"fa-",emptyText:"None Selected",searchText:"Search",cancelSelected:!0,keyboard:!0,flat:!1,heightToScroll:"290",iconPicker:function(){return'<div class="namespace-selector"><span class="namespace-selected-icon">None selected</span><span class="namespace-selector-arrow"><i></i></span></div><div class="namespace-selector-popup"><div class="namespace-icons-container"></div></div>'},iconSearch:function(){return'<div class="namespace-selector-search"><input type="text" name="" value="" placeholder="searchText" class="namespace-search-input"/><i class="namespace-search-icon"></i></div>'},formatNoMatches:function(){return"No matches found"},errorHanding:function(){},process:function(e){return e&&e.match(this.iconPrefix)?e.replace(this.iconPrefix,""):e},parse:function(e){return e.match(this.iconPrefix)?e:this.iconPrefix+e},onInit:null,onReady:null,onAfterFill:null},o={init:function(e){this.attach(e,this.gather(e))},destroy:function(e){e.$wrapper.off("keydown"),e.bound=!1},keys:function(){return{LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27}},horizontalChange:function(e){return this.$mask||this.options.flat?(this.index+=parseInt(e,10),this.index>=this.iconsAll.length?this.index=this.iconsAll.length-1:this.index<0&&(this.index=0),this.current=this.iconsAll[this.index],void this.set(this.current)):void this._open()},verticalChange:function(e){if(!this.$mask&&!this.options.flat)return void this._open();var t=this.$iconContainer.find("."+this.namespace+"-list").width(),i=this.$iconContainer.find("."+this.namespace+"-list li").width(),s=Math.floor(t/i);if(e=parseInt(e,10),this.index>=0&&this.$iconContainer.find("."+this.namespace+"-group").text()){var n=this.$iconContainer.find("."+this.current).parent().siblings().length+1,a=this.$iconContainer.find("."+this.current).parents("."+this.namespace+"-group").next().find("li").length,r=this.$iconContainer.find("."+this.current).parents("."+this.namespace+"-group").prev().find("li").length,o=this.$iconContainer.find("."+this.current).parent().index(),c=void 0;1===e?(c=n%s,o+s>=n&&a?o+c>=n&&c>0?o+c>=n+a?this.index+=a:this.index+=c:o+c+s>=n+a?this.index+=c+a:this.index+=c+s:this.index+=s):e===-1&&(c=r%s,o>c-1&&o<s?r>=s?this.index-=s+c:this.index-=o+1:o<=c-1?this.index-=c:this.index-=s)}else this.index+=s*e;this.index>=this.iconsAll.length?this.index=this.iconsAll.length-1:this.index<0&&(this.index=0),this.current=this.iconsAll[this.index],this.set(this.current)},enter:function(){this.$mask?this.current&&(this.set(this.current),this._hide()):this._open()},esc:function(){this.set(this.previous),this._hide()},tab:function(){this._hide()},gather:function(e){return{left:$.proxy(this.horizontalChange,e,"-1"),up:$.proxy(this.verticalChange,e,"-1"),right:$.proxy(this.horizontalChange,e,"1"),down:$.proxy(this.verticalChange,e,"1"),enter:$.proxy(this.enter,e),esc:$.proxy(this.esc,e)}},press:function(e){var t=e.keyCode||e.which;if(9===t&&this._keyboard.tab.call(this),t in this.map&&"function"==typeof this.map[t])return e.preventDefault(),this.map[t].call(this);var i=this;this.$iconPicker.find("."+this.namespace+"-search-input").one("keyup",function(){i.searching($(this).val())})},attach:function(e,t){var i=this,s=void 0;for(s in t)if(t.hasOwnProperty(s)){var n=this._stringSeparate(s,"_"),a=[],r=n.length;if(1===r)a[0]=n[0].toUpperCase(),e.map[this.keys()[a[0]]]=t[s];else for(var o=0;o<n.length;o++)a[o]=n[o].toUpperCase(),0===o?void 0===e.map[this.keys()[a[0]]]&&(e.map[this.keys()[a[0]]]={}):e.map[this.keys()[a[0]]][this.keys()[a[o]]]=t[s]}e.bound||(e.bound=!0,e.$wrapper.on("keydown",function(t){i.press.call(e,t)}))},_stringSeparate:function(e,t){var i=new RegExp("[.\\"+t+"\\s].*?");t=e.match(i);var s=e.split(t);return s}},c="asIconPicker",h=function(){function e(t,n){i(this,e),this.element=t,this.$element=(0,s.default)(t),this.options=s.default.extend({},r,n,this.$element.data()),this.namespace=this.options.namespace,this.classes={disabled:this.namespace+"_disabled",wrapper:this.namespace+"-wrapper",search:this.namespace+"_with_search",active:this.namespace+"_active",flat:this.namespace+"_isFlat",hide:this.namespace+"_hide",hover:this.namespace+"_hover",mask:this.namespace+"-mask"},this.$element.addClass(this.namespace),this.$element.wrap('<div class="'+this.classes.wrapper+'"></div>'),this.$wrapper=this.$element.parent(),this.$wrapper.attr("tabindex","0");var a=this.options.iconPicker().replace(/namespace/g,this.namespace),o=this.options.iconSearch().replace(/namespace/g,this.namespace).replace(/searchText/g,this.options.searchText);this.$iconPicker=(0,s.default)(a),this.$iconContainer=this.$iconPicker.find("."+this.namespace+"-icons-container"),this.$iconSearch=(0,s.default)(o),this.options.hasSearch&&(this.$iconContainer.before(this.$iconSearch),this.$iconContainer.parent().addClass(this.classes.search),this.iconsSearched=[]),this.map={},this.bound=!1,this.isSearch=!1,this.current=this.$element.val(),this.source=[],this.disabled=!1,this.initialized=!1,this._trigger("init"),this.init()}return a(e,[{key:"init",value:function(){var e=this;this.$element.hide(),this.$element.before(this.$iconPicker),!this.options.source&&this.$element.is("select")?this.source=this._getSourceFromSelect():this.source=this._processSource(this.options.source),this.showLoading(),this.$wrapper.find("."+this.namespace+"-selector-popup").addClass(this.classes.hide),e.options.flat?e._open():this.$wrapper.find("."+this.namespace+"-selector").on("click",function(){e._open()}),this.options.keyboard?this.$wrapper.on("focus",function(){o.init(e)}):this.$iconPicker.find("."+this.namespace+"-search-input").keyup(s.default.proxy(function(t){e.searching((0,s.default)(t.currentTarget).val())},this)),this.$iconPicker.on("click","."+this.namespace+"-isSearching ."+this.namespace+"-search-icon",s.default.proxy(function(){this.$iconPicker.find("."+this.namespace+"-search-input").focus().select(),this.reset()},this)),this.$iconContainer.on("click","."+this.namespace+"-list li",s.default.proxy(function(e){return this.options.cancelSelected&&(0,s.default)(e.currentTarget).hasClass(this.namespace+"-current")?((0,s.default)(e.currentTarget).removeClass(this.namespace+"-current"),void this.set()):(this.set((0,s.default)(e.currentTarget).children().data("value")),void this._hide())},this)).on("mouseenter","."+this.namespace+"-list li",s.default.proxy(function(e){this.highlight((0,s.default)(e.currentTarget).children().data("value"))},this)).on("mouseleave","."+this.namespace+"-list li",s.default.proxy(function(){this.highlight()},this)),this.$iconPicker.click(function(t){return t.stopPropagation(),e.$iconPicker.find("."+e.namespace+"-search-input").focus().select(),!1}),this.initialized=!0,this._trigger("ready")}},{key:"_getSourceFromSelect",value:function(){var e=[];return this.$element.children().each(function(t,i){var n=(0,s.default)(i);if(n.is("optgroup")){for(var a=s.default.extend({},n.data(),{label:i.label,items:[]}),r=n.children(),o=r.length,c=0;c<o;c++)a.items.push({value:r.eq(c).val(),text:r.eq(c).text()});e.push(a)}else n.is("option")&&e.push({value:n.val(),text:n.text()})}),e}},{key:"_processSource",value:function(e){var t=function(e,t){return"string"==typeof e?{value:e,text:t}:"string"==typeof t?{value:t,text:t}:t},i=[];if(s.default.isArray(e))for(var n=0;n<e.length;n++)if(e[n].items)if(s.default.isArray(e[n].items)){for(var a=0;a<e[n].items.length;a++)e[n].items[a]=t(a,e[n].items[a]);i[n]=e[n]}else{i[n]={label:e[n].label,items:[]};for(var r in e[n].items)({}).hasOwnProperty.call(e[n].item,r)&&i[n].items.push(t(r,e[n].items[r]))}else i[n]=t(n,e[n]);else for(var o in e)({}).hasOwnProperty.call(e,o)&&i.push(t(o,e[o]));return i}},{key:"showLoading",value:function(){this.$iconContainer.html('<span class="'+this.namespace+'-loading"><i></i></span>'),this.source.length>0&&this.fillIcon()}},{key:"searching",value:function(e){var t=this;if(""===e)return void this.reset();this.$iconSearch.addClass(this.namespace+"-isSearching"),this.isSearch=!0,this.iconsSearched=[];for(var i,n=function(i){return t.replaceDiacritics(i.text).toLowerCase().search(e.toLowerCase())>=0},a={},r=0;i=this.source[r];r++)"undefined"!=typeof i.items?(a={label:i.label,items:s.default.grep(i.items,function(e){return n(e)})},a.items.length>0&&this.iconsSearched.push(a)):n(i)&&this.iconsSearched.push(i);if(this.iconsSearched.length>0){var o=this.iconsSearched[0];"undefined"!=typeof o.items?this.current=o.items[0].value:this.current=o.value}else this.current="";this.fillIcon()}},{key:"fillIcon",value:function(){var e=this;"undefined"!=typeof this.$iconContainer.data("asIconPicker")&&this.$iconContainer.asIconPicker("destory");var t=[];if(this.iconsAll=[],t=this.isSearch?this.iconsSearched:this.source,t.length<1)return void this.$iconContainer.html('<div class="'+this.namespace+'-noMatch">'+this.options.formatNoMatches()+"</div>");this.$iconContainer.html("");for(var i,n=function(t){return e.iconsAll.push(t.value),(0,s.default)("<li/>",{html:'<i class="'+e.options.extraClass+" "+t.value+'" data-value="'+t.value+'"></i>',title:e.options.tooltip?t.text:""})},a=void 0,r=0;r<t.length;r++)if(i=t[r],"undefined"!=typeof i.label){i.items.length&&(a=(0,s.default)('<div class="'+this.namespace+'-group"><div class="'+this.namespace+'-group-label">'+i.label+':</div><ul class="'+this.namespace+'-list"></ul></div>').appendTo(this.$iconContainer));for(var o,c=0;o=i.items[c];c++)n(o).appendTo(a.find("ul"))}else{var h=this.$iconContainer.children().last().attr("class");h!==this.namespace+"-list"&&(0,s.default)('<ul class="'+this.namespace+'-list"></ul>').appendTo(this.$iconContainer),n(i).appendTo(this.$iconContainer.children().last())}this.options.tooltip&&(s.default.asTooltip.closeAll(),this.$iconContainer.find("."+this.namespace+"-list li").asTooltip({namespace:"asTooltip",skin:"skin-dream",onlyOne:!0})),this.index=s.default.inArray(this.current,this.iconsAll),this.index>=0?this.set(this.current,!1):this.set(null,!1),this.$iconContainer.asScrollbar({namespace:e.namespace+"-icons"}),this._trigger("afterFill")}},{key:"replaceDiacritics",value:function(e){var t=void 0,i="40-46 50-53 54-57 62-70 71-74 61 47 77".replace(/\d+/g,"\\3$&").split(" ");for(t in i)({}).hasOwnProperty.call(i,t)&&(e=e.toLowerCase().replace(new RegExp("["+i[t]+"]","g"),"aeiouncy".charAt(t)));return e}},{key:"highlight",value:function(e){e?this.$iconPicker.find("."+e).parent().addClass(this.classes.hover):this.$iconPicker.find("."+this.classes.hover).removeClass(this.classes.hover)}},{key:"scrollToSelectedIcon",value:function(){if(this.current){var e=this.$iconContainer.find("."+this.namespace+"-list").width(),t=this.$iconContainer.height(),i=this.$iconContainer.find("."+this.namespace+"-list li").height(),s=this.$iconContainer.find("."+this.current).parent().offset().top,n=this.$iconContainer.find("."+this.namespace+"-list li").width(),a=Math.floor(e/n),r=this.$iconContainer.find("."+this.namespace+"-list").offset().top;this.index<a?this.value=0:this.value=(s+i-r)/t}this.$iconContainer.asIconPicker("move",this.value,!0)}},{key:"reset",value:function(){this.$iconPicker.find("."+this.namespace+"-search-input").val(""),this.$iconSearch.removeClass(this.namespace+"-isSearching"),this.isSearch=!1,this.fillIcon(),this.$iconContainer.outerHeight()>=this.options.heightToScroll&&this.$iconContainer.asScrollbar()}},{key:"_open",value:function(){var e=this.$wrapper.find("."+this.namespace+"-selector"),t=this;t.options.flat?(e.addClass(this.classes.flat),e.siblings("."+this.namespace+"-selector-popup").addClass(this.classes.flat).removeClass(this.classes.hide)):(e.addClass(this.classes.active),e.siblings("."+this.namespace+"-selector-popup").addClass(this.classes.active).removeClass(this.classes.hide),this.previous=this.current,e.hasClass(this.classes.active)&&!t.options.flat&&(this.$iconPicker.find("."+this.namespace+"-search-input").focus().select(),this.$mask=(0,s.default)("<div></div>").addClass(this.classes.mask).appendTo(this.$element.parent()),this.$mask.on("click",function(){t._hide()})))}},{key:"_hide",value:function(){this.options.flat||(this.options.keyboard&&o.destroy(this),this._clearMask(),this.$wrapper.find("."+this.namespace+"-selector").removeClass(this.classes.active),this.$wrapper.find("."+this.namespace+"-selector-popup").addClass(this.classes.hide).removeClass(this.classes.active),this.$wrapper.focus())}},{key:"_clearMask",value:function(){this.$mask&&(this.$mask.off(".asIconPicker"),this.$mask.remove(),this.$mask=null)}},{key:"_trigger",value:function(e){for(var t,i=arguments.length,s=Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];var a=(t=[this]).concat.apply(t,s);this.$element.trigger(c+"::"+e,a),e=e.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)});var r="on"+e;if("function"==typeof this.options[r]){var o;(o=this.options[r]).apply.apply(o,[this].concat(s))}}},{key:"_update",value:function(){this.$element.val(this.val()),this._trigger("change",[this.current])}},{key:"load",value:function(e){"undefined"!=typeof e&&(this.source=this._processSource(e)),this.options.flat?this.showLoading():(this.$wrapper.find("."+this.namespace+"-selector-popup").removeClass(this.classes.hide),this.showLoading(),this.$wrapper.find("."+this.namespace+"-selector-popup").addClass(this.classes.hide))}},{key:"get",value:function(){return this.current}},{key:"set",value:function(e,t){this.$iconContainer.find("."+this.namespace+"-current").removeClass(this.namespace+"-current"),e?(this.$iconContainer.find('[data-value="'+e+'"]').parent().addClass(this.namespace+"-current"),this.$iconPicker.find("."+this.namespace+"-selected-icon").removeClass(this.namespace+"-none-selected").html('<i class="'+this.options.extraClass+" "+e+'"></i>'+this.options.process(e))):this.$iconPicker.find("."+this.namespace+"-selected-icon").addClass(this.namespace+"-none-selected").html('<i class="'+this.options.extraClass+" "+this.options.iconPrefix+'ban"></i>'+this.options.emptyText),this.current=e,this.index=s.default.inArray(this.current,this.iconsAll),this.scrollToSelectedIcon(),t!==!1&&this._update()}},{key:"clear",value:function(){this.set(null)}},{key:"val",value:function(e){if("undefined"==typeof e)return this.options.process(this.current);var t=this.options.parse(e);t?this.set(t):this.clear()}},{key:"enable",value:function(){this.disabled=!1,this.$wrapper.removeClass(this.classes.disabled),this._trigger("enable")}},{key:"disable",value:function(){this.disabled=!0,this.$wrapper.addClass(this.classes.disabled),this._trigger("disable")}},{key:"destory",value:function(){this.$element.data(c,null),this._trigger("destory")}}],[{key:"setDefaults",value:function(e){s.default.extend(r,s.default.isPlainObject(e)&&e)}}]),e}(),l={version:"0.2.1"},p="asIconPicker",u=s.default.fn.asIconPicker,d=function(e){for(var t=this,i=arguments.length,a=Array(i>1?i-1:0),r=1;r<i;r++)a[r-1]=arguments[r];if("string"==typeof e){var o=function(){var i=e;if(/^_/.test(i))return{v:!1};if(!/^(get)/.test(i))return{v:t.each(function(){var e=s.default.data(this,p);e&&"function"==typeof e[i]&&e[i].apply(e,a)})};var n=t.first().data(p);return n&&"function"==typeof n[i]?{v:n[i].apply(n,a)}:void 0}();if("object"===("undefined"==typeof o?"undefined":n(o)))return o.v}return this.each(function(){(0,s.default)(this).data(p)||(0,s.default)(this).data(p,new h(this,e))})};s.default.fn.asIconPicker=d,s.default.asIconPicker=s.default.extend({setDefaults:h.setDefaults,noConflict:function(){return s.default.fn.asIconPicker=u,d}},l)});